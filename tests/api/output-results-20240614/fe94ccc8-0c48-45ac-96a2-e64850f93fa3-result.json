{"name": "test_subscription_and_cancel_sub", "status": "failed", "statusDetails": {"message": "AssertionError: assert (299858 + 298) == 299858\n +  where 299858 = int('299858')\n +  and   299858 = int('299858')", "trace": "self = <test_liveroom.TestLivePage object at 0x10f4b32e0>\nget_config_data = {'chest_info': {'add_lemon': 20, 'chest_donate_user2_pwd': 'Pwd@1234', 'chest_streamer': 'automation', 'chest_streamer...ard_info': {'search_category': 'Art', 'search_tag': 'lol'}, 'donate_value': 1, 'follow_displayName': 'automation', ...}\nget_follow_streamer_auth_header = {'authorization': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6ImF1dG9tYXRpb24iLCJkaXNwbGF5bmFtZSI6ImF1dG9tYX...lkIjoiIiwiZXhwIjoxNzIwOTIyMjA2LCJpYXQiOjE3MTgzMzAyMDYsImlzcyI6IkRMaXZlIn0.5mEiTrJH7V-4s_5dcuIM-TJFug2_fd6ZX49XMQrbZk8'}\n\n    @allure.title('test_subscription_and_cancel_sub')\n    @allure.severity(allure.severity_level.CRITICAL)\n    def test_subscription_and_cancel_sub(self, get_config_data, get_follow_streamer_auth_header):\n        \"\"\"\n        接口：AddSubscribe, MeSubscribing, UserUnsubscribe\n    \n        主播：automation去订阅并取消连续订阅\n        \"\"\"\n        currentDateAndTime = datetime.now()\n        currentTime = currentDateAndTime.strftime(\"%b %d, %Y\")\n        print(\"当前订阅时间：\" + currentTime)\n        next_month = currentDateAndTime + relativedelta(months=1)\n        next_month_sub_date = next_month.strftime(\"%b %d, %Y\")\n        print(\"下次续费时间：\" + next_month_sub_date)\n        sub_streamer = get_config_data['subscription_streamer']\n        print(sub_streamer)\n        with allure.step(\"获取订阅前的lemon数量\"):\n            sub_before_lemon = common.get_account_lemon(get_config_data['url'], get_follow_streamer_auth_header)\n            print(\"Before subscription lemon is: \" + str(sub_before_lemon))\n        with allure.step(\"用户：\" + get_config_data['follow_streamer'] + \"订阅主播间\" + sub_streamer):\n            sub_resp = common.api_post(get_config_data['url'], get_follow_streamer_auth_header,\n                                       Payload.LiveRoomAPI().AddSubscription(sub_streamer, 1))\n            print(sub_resp)\n        with allure.step(\"检查开始订阅的时间\"):\n            print(\"开始订阅的日期为：\" + currentTime)\n        with allure.step(\"检查返回error is Null, Cash back is Null\"):\n            assert sub_resp['data']['subscribeWithCashback']['err'] is None\n            assert sub_resp['data']['subscribeWithCashback']['cashbacked'] is None\n        time.sleep(60)\n        with allure.step(\"获取订阅后的lemon数量\"):\n            sub_after_lemon = common.get_account_lemon(get_config_data['url'], get_follow_streamer_auth_header)\n            print(\"Before subscription lemon is: \" + str(sub_after_lemon))\n        with allure.step(\"检查订阅后lemon是否只是扣了一个月298个lemon\"):\n>           assert int(sub_after_lemon) + 298 == int(sub_before_lemon)\nE           AssertionError: assert (299858 + 298) == 299858\nE            +  where 299858 = int('299858')\nE            +  and   299858 = int('299858')\n\ntest_liveroom.py:459: AssertionError"}, "description": "\n        接口：AddSubscribe, MeSubscribing, UserUnsubscribe\n\n        主播：automation去订阅并取消连续订阅\n        ", "steps": [{"name": "获取订阅前的lemon数量", "status": "passed", "start": 1718330439123, "stop": 1718330440532}, {"name": "用户：automation订阅主播间mo2", "status": "passed", "start": 1718330440533, "stop": 1718330441868}, {"name": "检查开始订阅的时间", "status": "passed", "start": 1718330441868, "stop": 1718330441868}, {"name": "检查返回error is Null, Cash back is Null", "status": "passed", "start": 1718330441868, "stop": 1718330441868}, {"name": "获取订阅后的lemon数量", "status": "passed", "start": 1718330501866, "stop": 1718330503257}, {"name": "检查订阅后lemon是否只是扣了一个月298个lemon", "status": "failed", "statusDetails": {"message": "AssertionError: assert (299858 + 298) == 299858\n +  where 299858 = int('299858')\n +  and   299858 = int('299858')\n", "trace": "  File \"/Users/helen/Downloads/Code/web-api-test/tests/api/test_liveroom.py\", line 459, in test_subscription_and_cancel_sub\n    assert int(sub_after_lemon) + 298 == int(sub_before_lemon)\n"}, "start": 1718330503257, "stop": 1718330503258}], "attachments": [{"name": "stdout", "source": "4e15a78f-8bef-4169-92ac-9be18f917175-attachment.txt", "type": "text/plain"}], "start": 1718330439121, "stop": 1718330503260, "uuid": "8bc5f128-22a7-4872-826a-6fb8cf5e7014", "historyId": "9313f56f7cbf9fabd19e3a97bc43eee4", "testCaseId": "9313f56f7cbf9fabd19e3a97bc43eee4", "fullName": "test_liveroom.TestLivePage#test_subscription_and_cancel_sub", "labels": [{"name": "feature", "value": "test_liveroom_page"}, {"name": "severity", "value": "critical"}, {"name": "suite", "value": "test_liveroom"}, {"name": "subSuite", "value": "TestLivePage"}, {"name": "host", "value": "MacBook-Pro.local"}, {"name": "thread", "value": "3950-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "test_liveroom"}]}